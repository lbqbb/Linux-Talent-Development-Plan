Linux达人养成计划（一）

第一章 Linux简介
1-1.Linux简介
1、Linux内核官网：www.kernel.org

1-2.开源软件介绍
Apache、Nginx、MySQL、Python、Ruby、MongoDB等

1-3.Linux应用领域
1、基于Linux的企业服务器
www.netcraft.com
2、Linux在嵌入式领域

1-4.Linux与Windows的不同
~Linux严格区分大小写
~Linux中所有内容以文件形式保存，包括硬件
~Linux不靠扩展名区分文件类型
压缩包："*.gz"、"*.bz2"、"*.tar.bz2"、".tgz"等
二进制软件包：".rpm"
网页文件:".html"、"*.php"
脚本文件:"*.sh"
配置文件:"*.conf"
~Windows下的程序不能直接在Linux中安装和运行

1-5.字符界面的优势
优势一：字符界面占用的系统资源更少
优势二：字符界面减少了出错、被攻击的可能性

第二章 Linux系统安装
2-1.虚拟机的安装
VMware官方网站：http://www.vmware.com

2-3.系统分区与格式化
（1）主分区：最多只能有4个（主分区+扩展分区也不能超过4个）。
扩展分区：
*最多只能有1个。
*主分区加拓展分区最多有4个
*不能写入数据，只能包含逻辑分区
（2）格式化
格式化（高级格式化）又称逻辑格式化，它是根据用户指定的文件系统（如FAT16、FAT32、NTFS、EXT2、EXT3、EXT4等），在磁盘的特定区域写入特定数据，在分区中划出一片用于存放文件分配表、目录表等用于文件管理的磁盘空间。
注意：格式化后的空间最小单元——block（数据块）存储量默认为4KB，例如将10KB大小的数据存储在格式化处理后的分区中，需要占用三个数据块，其中有一个数据块还有2KB的剩余空间，但是它无法再被别的数据占用。

2-4.分区之分区设备文件名与挂载
（3）设备文件名
*/dev/hda1(IDE硬盘接口)
*/dev/sda1(SCSI硬盘接口、SATA硬盘接口)
逻辑分区编号一定从5(盘符是Windows的概念)开始
（4）挂载
必须分区
*/（根分区）
*swap分区（交换分区，内存2倍，不超过2G），注意生产环境下，内存在4G以下，则swap分区为内存的两倍，若内存在4G以上，则swap分区与内存相同。
推荐分区
*/boot（启动分区，200MB）

2-6.Linux系统安装
（1）虚拟机全屏快捷键 Ctrl+Alt+Enter

2-8.XShell的安装和使用

第3章 命令基本格式及文件处理命令

3-1.Linux命令格式
Linux常用命令
一、命令基本格式
二、文件处理命令
三、文件搜索命令
四、帮助命令
五、压缩与解压缩命令
六、关机和重启命令
七、其他常用命令

*命令格式
命令 【选项】 【参数】

注意：个别命令使用不遵循此格式，当有多个选项时，可以写在一起简化选项与完整选项，如-a 相当于--all

*-rw-r--r--.
-文件类型（-文件d目录|软链接文件）
rw- r-- r--
u所有者 g所属组 o其他人 r读 w写 x执行 "."代表ACL权限

*查看目录中内容：ls
#ls [选项] [文件或目录]
选项：
   -a 显示所有文件，包含隐藏文件
   -l 显示详细信息
   -d 查看目录属性
   -h 人性化显示文件大小
   -i 显示inode

3-2.目录处理命令（上）
*建立目录：mkdir
#mkdir -p [目录名]
-p 递归创建
命令原意：create directory

*切换所在目录：cd
#cd [目录]
命令英文原意：change directory
**简化操作
#cd ~ 进入当前用户的home目录
#cd
#cd - 进入上次目录
#cd .. 进入上一级目录
#cd . 进入当前目录

3-3.Linux目录处理命令（下）
*删除空目录：rmdir
#rmdir[目录名]
命令英文原意：remove empty directories

*复制命令：cp
#cp[选项] [原文件或目录][目标目录]
命令英文原意：copy
选项：
    -r 复制目录
    -p 连带文件属性复制
    -d 若源文件是链接文件，则复制链接属性
    -a 相当于 -pdr

*剪切 或改名命令：mv
#mv [原文件或目录] [目标目录]
命令英文原意:move

3-4.Linux中常见目录作用
   常用目录作用
* / 根目录
* /bin 命令保存目录（普通用户就可以读取的命令）
* /boot 启动目录，启动相关文件
* /dev 设备文件保存目录
* /etc 配置文件保存目录
* /home 普通用户的家目录
* /lib 系统库保存目录
* /mnt 系统挂载目录
* /media挂载目录
* /root 超级用户的家目录
* /tmp 临时目录
* /sbin 命令保存目录（超级用户才能使用的目录）
* /proc 直接写入内存的
* /sys 
*/usr 系统软件资源目录
    /usr/bin/系统命令（普通用户）
    /usr/sbin/系统命令（超级用户）
* /var 系统相关文档内容

3-5 Linux链接命令
*链接命令：ln
#ln -s [原文件] [目标文件]
命令英文原意：link
功能描述：生成链接文件
选项： -s 创建软链接

第4章 文件搜索命令

文件搜索命令locate
命令搜索命令whereis与which
文件搜索命令find
字符串搜索命令grep
find命令与grep命令的区别

4-1.Linux中文件搜索命令locate
#locate 文件名
在后台数据库中按文件名搜索，搜索速度更快(速度快，但是只能搜索文件名)

# /var/lib/mlocate
*locate命令所搜索的后台数据库

#updatedb
更新数据库

#/etc/updatedb.conf配置文件
. PRUNE_BIND_MOUNTS = "yes"
#开启搜索限制
. PRUNEFS =
#搜索时，不搜索的文件系统
. PRUNENAMES = 
#搜索时，不搜索的文件类型
. PRUNEPATHS = 

4-2.Linux中的命令搜索命令

# whereis 命令名
*搜索命令所在的路径及帮助文档所在的位置
选项：
    -b : 只查找可执行文件
    -m : 只查找帮助文件

# which 文件名
*搜索命令所在路径及别名

4-3.Linux中find命令
# find [搜索范围] [搜索条件]
*搜索文件

#find / -name install.log
*避免大范围搜索，会非常耗费系统资源

#find /root -iname install.log
*不区分大小写
#find /root -user root
*按照所有者搜索
#find /root -nouser
*查找没有所有者的文件

#find /var/log/ -mtime +10
*查找10天前修改的文件
-10 10天内修改文件
10  10天当天修改的文件
+10 10天前修改的文件

atime 文件访问时间
ctime 改变文件属性
mtime 修改文案内容

#find . size 25k
*查找文件大小是25KB的文件
-25k 小于25KB的文件
25K  等于25KB的文件
+25K 大于25KB的文案

#find . -inum 262422
*查找i节点是262422的文件

#find /etc -size +20k -a -size -50k
*查找/etc/目录下，大于20KB并且小于50KB的文件
-a and 逻辑与，两个条件都满足
-o or 逻辑或，两个条件满足一个即可

#find /etc -size +20k -a -size -50k -exec ls -lh {} \;
*查找/etc/目录下，大于20KB并且小于50KB的文件，并显示详细信息
#-exec/-ok 命令{}\；对搜索结果执行操作

4-4.Linux中grep命令
搜索字符串命令grep

#grep [选项] 字符串 文件名
*在文件当中匹配符合条件的字符串
选项：
    -i 忽略大小写
    -v 排除指定字符串

第五章 帮助命令

5-1 Linux中 帮助命令
帮助命令man

man的级别
1 ： 查看命令的帮助
2 ： 查看可被内核调用的函数的帮助
3 ： 查看函数和函数库的帮助
4 ： 查看特殊文件的帮助（主要是/dev目录下的文件）
5 ： 查看配置文件的帮助
6 ： 查看游戏的帮助
7 ： 查看其它杂项的帮助
8 ： 查看系统管理员可用命令的帮助
9 ： 查看和内核相关文件的帮助


#man ls 获取命令的帮助 输入/d,会找打第一个-d,按键盘n键，向下查找，按Shift+n键，向上查找

#man -f 命令
相当于 whatis 命令

举例：
#man 5 passwd
#man 4 null
#man 8 ifconfig

查看和命令相关的所有帮助
# man -k 命令
相当于
#apropos 命令
例如：# apropos passwd

5-2 Linux中 其它帮助命令
其它命令

（1）#命令 --help
*获取命令选项帮助

例如：
# ls --help
（2）shell内部命令帮助
#help shell 内部命令
*获取shell内部命令的帮助

例如：
#whereis cd 
*确定是否是shell内部命令
#help cd 
*获取内部命令帮助

（3）详细命令帮助info
#info 命令
  -回车： 进入子帮助页面（带有*号标记)
  -u : 进入上层页面
  -n : 进入下一个帮助小节
  -p : 进入上一个帮助小节
  -q : 退出
  
第6章 压缩命令
6-1 Linux中的压缩命令
*常用压缩格式：.zip .gz .bz2 .tar.gz .tar.bz2

（1）.zip
#zip 压缩文件名 源文件
#zip -r  压缩文件名 源目录
#unzip 压缩文件（解压缩）
(2).gz格式压缩
#gzip 源文件 
*压缩为.gz格式的压缩文件，源文件会消失
#gzip -c 源文件 > 压缩文件
*压缩为.gz格式，源文件保留
例如： gzip -c cangls > cangls.gz
#gzip -r 目录
*压缩目录下所有的子文件，但是不能压缩目录
#gzip -d 压缩文件
*解压缩文件
#gunzip 压缩文件
*解压缩文件
（3).bz2格式压缩
#bzip2 源文件
*压缩为.bz格式，不保留源文件
#bzip2 -k 源文件
*压缩之后保留源文件

**注意 ： bzip2命令不能压缩目录
#bzip2 -k 压缩文件
*解压缩，-k保留压缩文件
#bunzip 压缩文件
*解压缩，-k保留压缩文件

6-2 Linux中压缩命令2
（4）打包命令tar
#tar -cvf 打包文件名 源文件
选项：
    -c : 打包
    -v : 显示过程
    -f : 指定打包后的文件名
例如：# tar -cvf longzls.tar longzls
（5）解打包命令
#tar -xvf 打包文件名
选项：
    -x : 解打包
例如：#tar -xvf longzls.tar
(6).tar.gz压缩格式
*其实.tar.gz格式时先打包为.tar格式，在压缩为.gz格式
#tar -zcvf 压缩包名.tar.gz 源文件
选项：
    -z : 压缩为.tar.gz格式
#tar -zxvf 压缩包名.tar.gz
选项： 
    -x ： 解压缩.tar.gz格式
（7）.tar.bz2压缩格式
#tar -jcvf 压缩包名.tar.bz2源文件
选项：
    -z : 压缩为.tar.bz2格式
#tar -jxvf 压缩包名.tar.bz2
选项：
    -x : 解压缩.tar.bz2格式
**注意：指定解压缩文件位置：
tar -jxvf jp.tar.bz2 -C /tmp/
(8)只查看，不解压命令
#tar -ztvf test.tar.gz

第7章 关机和重启命令
7-1 Linux中关机与重启命令
（1）shutdown命令
#shutdown [选项] 时间
选项：
   -c : 取消前一个关机命令
   -h : 关机
   -r : 重启
例如：#shutdown -r now (会立刻重启)
#shutdown -r 05:30 (会在凌晨5点半重启，执行命令后会占用控制台)
#shutdown -r 05:30 & (后台执行重启)
#shutdown -c (取消重启)
（2）其他关机命令
#halt
#poweroff
#init 0
这三个关机命令相对不安全，不建议采用
（3）其他重启命令
#reboot
#init 6
(4)系统运行级别
>0 关机
>1 单用户
>2 不完全多用户，不包含NFS服务
>3 完全多用户
>4 未分配
>5 图形界面
>6 重启
#cat /etc/inittab
*修改系统默认运行级别
#runlevel
*查询系统运行级别
（5）退出登录logout

第8章 其他常用命令
8-1 Linux中挂载命令
（1）查询与自动挂载
#mount
*查看系统中已经挂载的设备
#mount -a 
*依据配置文件/etc/fstab的内容，自动挂载
（2）挂载命令格式
#mount [-t 文件系统] [-o 特殊选项] 设备文件名 挂载点
*选项：
  -t 文件系统：加入文件系统类型来指定挂载的类型，可以ext3、ext4、iso9660等文件系统
  -o 特殊选项：可以指定挂载的额外选项
（3）挂载光盘
#mkdir /mnt/cdrom/
*建立挂载点
#mount -t iso9660 /dev/sr0 /mnt/cdrom/
*挂载光盘
(4)卸载光盘
umount /dev/sr0
(5)挂载U盘
#fdisk -l
*查看U盘设备文件名
#mount -t vfat /dev/sdn1 /mnt/usb/

**注意：Linux默认是不支持NTFS文件系统的

8-2 Linux中用户登录查看命令
（1）#w 用户名
命令输出：
* USER：登录的用户名；
* TTY：登录终端；
* FROM：从哪个IP地址登录；
* LOGIN@：登录时间；
* IDLE：用户闲置时间；
* JCPU：指的是和该终端连接的所有进程占用的时间。这个时间里并不包括过去的后台作业时间，但却包括当前正在运行的后台作业所占用的时间；
* PCUP：是指当前进程所占用的时间；
* WHAT：当前正在运行的命令
（2）#who 用户名
命令输出：
   - 用户名
   -登录终端
   -登录时间（登录来源IP地址）
（3）查询当前登录和过去登录的用户信息
#last
*last命令默认是读取/var/log/wtmp 文件数据
*命令输出
   -用户名
   -登录终端
   -登录Ip
   -登录时间
   -退出时间（在线时间）
（4）查看所有用户的最后一次登录时间
#lastlog
*lastlog命令默认是读取/var/log/lastlog文件内容
*命令输出
  -用户名
  -登录终端
  -登录Ip
  -最后一次登录时间
第9章 Shell基础
9-1 shell概述
（1）shell是什么
*Shell是一个命令行解释器，它为用户提供了一个向Linux内核发送请求以便运行程序的界面系统程序，用户可以用Shell来启动、挂起、停止甚至编写一些程序。
*Shell还是一个功能相当强大的编程语言，易编写，易调试，灵活性较强。Shell是解释执行的脚本语言，在Shell中可以直接调用Linux系统命令。
（2）Shell的分类
Bourne Shell:从1979起Unix就开始使用Bourne Shell,Bourne Shell的主文件名为sh。
C Shell：C Shell主要在BSD版的Unix系统中使用，其语法和C语言相类似而得名

Shell的两种语法Bourne和C，这两种语法彼此不兼容。Bourne家族主要包括sh、ksh、Bash、psh、zsh;C家族主要包括：csh、tcsh
9-2 脚本执行方式
1、echo输出命令
#echo [选项] [输出内容]
* 选项：
  —— -e：支持反斜线控制点字符装换
      —— \a：输出警告音
      —— \b：退格键，也就是向左删除键
      —— \n：换行符
      —— \r：回车键
      —— \t：制表符，也就是Tab键
      —— \v：垂直制表符
      —— \0nnn：按照八进制ASCII码表输出字符。其中0为数字零，nnn是三位八进制
      ——\xhh：按照十六进制ASCII码表输出字符。其中hh是两位十六进制数
2、第一个脚本
#vi hello.sh
#!/bin/bash
#The first program
3、脚本执行
（1）赋予执行权限，直接运行
#chmod 755 hello.sh
#./hello.sh
（2）通过Bash调用执行脚本
#bash hello.sh

9-3 别名与快捷键
 Bash的基本功能
（1）查看与设定别名
#alias
*查看系统中所有的命令别名
#alias 别名= '原命令'
*设定命令别名
比如：
   #alias ls ='ls --color=never'

（2）别名永久生效与删除别名
#vi ~/.bashrc
*写入环境变量配置文件
#unalias 别名
*删除别名
（3）命令生效顺序
*第一顺位执行用绝对路径或相对路径执行的命令
*第二顺位执行别名
*第三顺位执行Bash的内部命令
*第四顺位执行按照￥PATH环境变量定义的目录查找顺序找到的第一个命令
（4）常用快捷键
*Ctrl+C 强制终止当前命令
*Ctrl+L 清屏
*Ctrl+A 光标移动到命令行首
*Ctrl+E 光标移动到命令行尾
*Ctrl+U 从光标所在位置删除都行首
*Ctrl+Z 把命令放入后台
*Ctrl+R 在历史命令中搜索

9-4 历史命令
（1）#history [选项][历史命令保存文件]
*选项：
 - -c:清空历史命令
 - -w:把缓存中的历史命令写入历史命令保存文件~/.bash_history
 *历史命令默认保存1000条，可以在环境变量配置文件/etc/profile中进行修改
历史命令的调用
 *使用上、下箭头调用以前的历史命令
 *使用“！n”重复执行第n条历史命令
 *使用“！！”重复执行上一条命令
 *使用“！字串”重复执行最后一条以该字串开头的命令
 （2）命令与文件补全
 在Bash中，命令与文件补全Tab

9-5 输出重定向
1、标准输入输出
2、输出重定向
#ls &>/dev/null(相当于黑洞)
3、输入重定向
#wc [选项][文件名]
*选项：
    -c 统计字节数
    -w 统计单词shu
    -l 统计行数
注意：
命令 < 文件 把文件作为命令的输入
命令 << 标识符

9-6 管道符
1、多命令顺序执行
： 命令1：命令2  多个命令顺序执行，命令之间没有任何逻辑关系
&& 命令1&&命令2  逻辑与
                当命令1正确执行，则命令2才会执行
                当命令1执行不正确，则命令2不会执行
|| 命令||命令   逻辑或
               当命令1执行不正确，则命令2才会执行
               当命令1正确执行，则命令2不会执行
2、管道符
#命令1 | 命令2
*命令1的正确输出作为命令2的操作对象

9-7 通配符
1、通配符
通配符           作用               
？           匹配一个任意字符
*            匹配0个或任意多个字符，也就是可以匹配任何内容
[]           匹配中括号中任意一个字符。例如：[acb]代表一定匹配一个字符，或者是a,或者是b
             ,或者是c
[-]          匹配中括号中任意一个字符，- 代表一个范围。例如：[a-z]代表匹配一个小写字母
[^]          逻辑非，表示匹配不是中括号内的一个字符。例如：[^0-9]代表匹配一个不是数字的
             字符
2、Bash中其他特殊符号
符号          作用
‘’      单引号。在单引号中所有的特殊符号，如“$”和“`”（反引号）都没有特殊含义。
""      双引号。在双引号中特殊符号都没有特殊含义，但是“$”、“`”和“\”是例外，拥有“调用变量
        的值”、“引用命令”和“转义符”的特殊含义。
``      反引号。反引号括起来的内容是系统命令，在Bash中会先执行它。和$()作用一样，不过
        推荐使用$(),因为反引号非常容易看错。
$()     和反引号作用一样，用来引用系统命令。
#       在shell脚本中，#开头的行代表注释
$       用于调用变量的值，如需要调用变量name的值时，需要用$name的方式得到变量的值。
\       转义符，跟在\之后的特殊符号将失去特殊含义，变为普通字符。如\$将输出“$”符号，而
        不当做是变量的引用。
